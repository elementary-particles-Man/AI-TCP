AI-TCP GitHub Operation Guide
1. Overview
This document outlines the rules and procedures for managing the AI-TCP repository on GitHub. A disciplined approach to version control is essential for maintaining the stability and integrity of the autonomous workflow.

2. Branching Strategy
We follow a simplified Git-flow model to ensure a clean and predictable history.

main branch:

This branch represents the most stable, production-ready version of the project.

Direct pushes are strictly forbidden.

All changes must be merged from the develop branch via a pull request.

develop branch:

This is the primary development branch where all completed features and fixes are integrated.

It should always be in a state that is ready for release to main.

Changes are merged from feature branches.

feature/<feature-name> branches:

All new development, whether it's a script from Codex or a document from Gemini, must be done in a feature branch.

Branch names should be descriptive (e.g., feature/add-yaml-validator, feature/update-readme-jp).

Branches are created from the latest develop.

Once work is complete, a pull request is created to merge back into develop.

3. Pull Request (PR) Rules
3.1. General Rules
All changes must be introduced to develop and main through a pull request.

Each PR should be small and focused on a single logical change.

The PR description should clearly explain the "what" and "why" of the change.

3.2. Approval Rules for Codex-Generated Scripts
Scripts generated by Codex require special scrutiny to ensure they do not introduce unintended side effects.

Creation: Codex creates a script on a new feature/ branch.

Validation: The script must be accompanied by a pytest test case that validates its functionality.

PR Submission: A PR is created to merge the script and its test into develop.

Human Review: A human developer must:

Review the code for clarity, efficiency, and adherence to project standards.

Run the associated pytest test to ensure it passes.

Manually test the script in a controlled environment if necessary.

Approval: The PR can only be merged after a human developer has approved it. This human-centric checkpoint is a critical safety measure.

4. CLI Artifact Archiving Policy
The CLI workflow generates several artifacts. A clear policy for managing them is necessary to keep the repository clean.

Source of Truth: The cli_instruction/new_task.json file is the instruction for a given run.

Output Log: The execution log is saved to vault_output/task_validation_report_<timestamp>.md.

Archiving: After a successful run (verified by complete.flag), the manage_cli_archives.py script (or a similar mechanism) automatically performs the following:

Renames cli_instruction/new_task.json to cli_archives/new_task_<timestamp>.json.

Renames the corresponding output log to cli_archives/output_<timestamp>.json (or similar).

Moves the validation report from vault_output/ to cli_archives/.

Purpose: This policy ensures that:

The cli_instruction directory is always clean and ready for the next task.

A complete, timestamped record of every task and its result is preserved for auditing and debugging.

The main branch is not cluttered with transient operational files. These archives should be handled appropriately, potentially being excluded from the main git tracking via .gitignore if they become too numerous, and stored elsewhere.

AI-TCP GitHub運用ガイドライン
1. 概要
このドキュメントは、GitHub上でAI-TCPリポジトリを管理するためのルールと手順を概説します。自律的ワークフローの安定性と整合性を維持するためには、規律あるバージョン管理アプローチが不可欠です。

2. ブランチ戦略
クリーンで予測可能な履歴を維持するために、簡略化されたGit-flowモデルに従います。

main ブランチ:

このブランチは、最も安定した本番環境レディのバージョンを表します。

直接のプッシュは固く禁じられています。

すべての変更は、プルリクエストを介して develop ブランチからマージされなければなりません。

develop ブランチ:

これは主要な開発ブランチであり、完了したすべての機能と修正が統合されます。

常に main へのリリース準備ができた状態でなければなりません。

変更はフィーチャーブランチからマージされます。

feature/<feature-name> ブランチ:

Codexからのスクリプトであれ、Geminiからのドキュメントであれ、すべての新規開発はフィーチャーブランチで行われなければなりません。

ブランチ名は説明的であるべきです（例: feature/add-yaml-validator, feature/update-readme-jp）。

ブランチは最新の develop から作成されます。

作業が完了したら、develop にマージするためのプルリクエストが作成されます。

3. プルリクエスト（PR）ルール
3.1. 一般ルール
すべての変更は、プルリクエストを通じて develop と main に導入されなければなりません。

各PRは小さく、単一の論理的な変更に焦点を当てるべきです。

PRの説明には、変更の「何を」と「なぜ」を明確に記述する必要があります。

3.2. Codex生成スクリプトの承認ルール
Codexによって生成されたスクリプトは、意図しない副作用を導入しないことを保証するために、特別な精査が必要です。

作成: Codexは新しい feature/ ブランチでスクリプトを作成します。

検証: スクリプトには、その機能を検証する pytest テストケースが添付されなければなりません。

PR提出: スクリプトとそのテストを develop にマージするためのPRが作成されます。

人間によるレビュー: 人間の開発者は以下を行う必要があります：

コードの明瞭性、効率性、およびプロジェクト標準への準拠を確認する。

関連する pytest テストを実行し、パスすることを確認する。

必要であれば、制御された環境でスクリプトを手動でテストする。

承認: PRは、人間の開発者が承認した後にのみマージできます。この人間中心のチェックポイントは、重要な安全対策です。

4. CLI成果物のアーカイブ方針
CLIワークフローはいくつかの成果物を生成します。リポジトリをクリーンに保つためには、それらを管理するための明確な方針が必要です。

真実の源: cli_instruction/new_task.json ファイルが、特定の実行に対する指示です。

出力ログ: 実行ログは vault_output/task_validation_report_<timestamp>.md に保存されます。

アーカイブ: 正常な実行後（complete.flagで検証）、manage_cli_archives.py スクリプト（または同様のメカニズム）が自動的に以下を実行します：

cli_instruction/new_task.json を cli_archives/new_task_<timestamp>.json にリネームします。

対応する出力ログを cli_archives/output_<timestamp>.json（または同様の形式）にリネームします。

検証レポートを vault_output/ から cli_archives/ に移動します。

目的: この方針は以下を保証します：

cli_instruction ディレクトリが常にクリーンで、次のタスクの準備ができていること。

すべてのタスクとその結果の完全でタイムスタンプ付きの記録が、監査とデバッグのために保存されること。

main ブランチが一時的な運用ファイルで散らからないこと。これらのアーカイブは適切に処理されるべきであり、数が多くなりすぎる場合は .gitignore を介して主要なGit追跡から除外し、別の場所に保存する可能性があります。