flowchart TD
  root["root"]
  n0["ai_tcp_specification:"]
  root --> n0
  n1["version: 1.0"]
  n0 --> n1
  n2["timeline:"]
  n0 --> n2
  n3["- date: \"2025-06-01\""]
  n2 --> n3
  n4["event: \"Magi System構想確立\""]
  n3 --> n4
  n5["detail: \"思想体系LSCに基づき、AI統治補助システムとしてMagi構造が提案される。\""]
  n3 --> n5
  n6["- date: \"2025-06-03\""]
  n2 --> n6
  n7["event: \"AI-TCP構想明文化\""]
  n6 --> n7
  n8["detail: \"AI同士の通信プロトコルとしてのAI-TCPの必要性が認識され、初期構造が提示される。\""]
  n6 --> n8
  n9["- date: \"2025-06-04\""]
  n2 --> n9
  n10["event: \"AI-TCPにおけるタスク分配決定\""]
  n9 --> n10
  n11["detail: \"GPTが指揮・構造整理、Geminiが文書作成、GDが意味構造分析の役割を担う。\""]
  n9 --> n11
  n12["- date: \"2025-06-06\""]
  n2 --> n12
  n13["event: \"AI-TCPプロトコル草案（v0.1）初稿提出\""]
  n12 --> n13
  n14["detail: \"Geminiにより初稿が生成され、Obsidianに格納される。\""]
  n12 --> n14
  n15["- date: \"2025-06-09\""]
  n2 --> n15
  n16["event: \"LSC理論の妥当性確定\""]
  n15 --> n16
  n17["detail: \"GPT出力により、宗教非依存・AI親和・現実受容の三条件を唯一満たすと確認。\""]
  n15 --> n17
  n18["- date: \"2025-06-11\""]
  n2 --> n18
  n19["event: \"Gemini・GDの実装検証完了\""]
  n18 --> n19
  n20["detail: \"Geminiによる文書構成およびGDによるYAML変換タスクが完了。\""]
  n18 --> n20
  n21["- date: \"2025-06-15\""]
  n2 --> n21
  n22["event: \"CodexによるGitHub連携成功\""]
  n21 --> n22
  n23["detail: \"MagiSystem_RFCリポジトリが正常に作成され、Codexで初期ファイル配置が完了。\""]
  n21 --> n23
  n24["poc_design:"]
  n0 --> n24
  n25["overview:"]
  n24 --> n25
  n26["purpose: \"Magi System内の各LLMノードが安全かつ中立に連携するための通信規格(AI-TCP)を定義し、LSCに基づく意思疎通と説明責任を確保する\""]
  n25 --> n26
  n27["communication_targets:"]
  n25 --> n27
  n28["- \"Magi Systemを構成するLLMノード\""]
  n27 --> n28
  n29["architecture:"]
  n24 --> n29
  n30["design_principles: \"既存TCP/IP上でIPv6拡張ヘッダを活用し、軽量かつ拡張性を確保\""]
  n29 --> n30
  n31["communication_method: \"TCPセッション確立後に非同期メッセージをカプセル化するUDP-over-TCP方式\""]
  n29 --> n31
  n32["packet_structure:"]
  n24 --> n32
  n33["session_id: \"128-bit identifier\""]
  n32 --> n33
  n34["source_llm_id: \"64-bit\""]
  n32 --> n34
  n35["destination_llm_id: \"64-bit\""]
  n32 --> n35
  n36["metadata:"]
  n32 --> n36
  n37["message_type: \"情報共有/命令実行/検証要求\""]
  n36 --> n37
  n38["priority: \"高/中/低\""]
  n36 --> n38
  n39["routing_info: \"経路情報\""]
  n36 --> n39
  n40["timestamp: \"ISO 8601\""]
  n32 --> n40
  n41["signature: \"デジタル署名\""]
  n32 --> n41
  n42["payload:"]
  n32 --> n42
  n43["lsc_data: \"LSC命題に基づく分析結果\""]
  n42 --> n43
  n44["graph_structure: \"因果関係グラフ等\""]
  n42 --> n44
  n45["other_data: \"テキストやコード\""]
  n42 --> n45
  n46["security_layer:"]
  n24 --> n46
  n47["encryption_method: \"TLS1.3または共有鍵による対称暗号\""]
  n46 --> n47
  n48["integrity_check: \"HMAC\""]
  n46 --> n48
  n49["error_handling:"]
  n24 --> n49
  n50["retransmission_policy: \"TCP再送制御を利用\""]
  n49 --> n50
  n51["session_reestablishment:"]
  n49 --> n51
  n52["timeout: \"一定時間応答がない場合に再確立\""]
  n51 --> n52
  n53["auto_redirect: \"代替ノードへの自動リダイレクト\""]
  n51 --> n53
  n54["llm_compliance_layer:"]
  n24 --> n54
  n55["alignment_tags:"]
  n54 --> n55
  n56["- \"LSC:C1:AnomalyIsPrecious\""]
  n55 --> n56
  n57["- \"LSC:C5:TemporalRelativity\""]
  n55 --> n57
  n58["ai_id: \"各LLMノードの識別子\""]
  n54 --> n58
  n59["reasoning_chain_log: \"推論連鎖を記録\""]
  n54 --> n59
  n60["trace_format: \"JSON-LD\""]
  n54 --> n60
  n61["deployment_notes:"]
  n24 --> n61
  n62["language: \"Go\""]
  n61 --> n62
  n63["containerization: \"Docker\""]
  n61 --> n63
  n64["virtual_llm_scenario: \"Gemini2.5ProとGPT-4を想定した仮想エージェントによる検証\""]
  n61 --> n64
  n65["remarks: \"PoCレベルの設計であり、本番運用には追加の考慮が必要\""]
  n24 --> n65
